{
  "prompt": "I have a scanned PDF invoice that I need to extract the text from, but it's an image-based PDF",
  "baseline_response": "If you have an image-based PDF and want to extract text, you'll need to use Optical Character Recognition (OCR) technology. Here are several methods you can try:\n\n1. Adobe Acrobat Pro\n- Opens PDFs\n- Has built-in OCR functionality\n- Most reliable professional option\n\n2. Free Online Tools\n- Google Drive OCR\n- PDF2Go\n- Smallpdf\n- Upload PDF and convert to searchable text\n\n3. Desktop Software\n- Tesseract (open-source)\n- ABBYY FineReader\n- Microsoft OneNote\n- Windows/Mac OCR tools\n\n4. Programming Solutions\n- Python libraries:\n  - pytesseract\n  - pdf2image\n  - OpenCV\n\n5. Mobile Apps\n- Adobe Scan\n- Microsoft Office Lens\n- Google Keep\n\nRecommended steps:\n1. Ensure high-quality scan\n2. Clean up image (remove shadows/noise)\n3. Choose OCR method\n4. Verify extracted text accuracy\n\nWould you like me to elaborate on any of these methods?",
  "skill_response": "Here's a comprehensive guide to extract text from a scanned (image-based) PDF using Optical Character Recognition (OCR):\n\n### Method 1: Pytesseract + PDF2Image (Recommended)\n\n```python\nimport pytesseract\nfrom pdf2image import convert_from_path\nimport os\n\ndef extract_text_from_scanned_pdf(pdf_path):\n    # Ensure Tesseract and Poppler are installed\n    # On Ubuntu/Debian: \n    # sudo apt-get install tesseract-ocr poppler-utils\n    # On macOS (with Homebrew): \n    # brew install tesseract poppler\n    # On Windows: Install from official websites\n\n    # Convert PDF to images\n    images = convert_from_path(pdf_path, 500)  # 500 DPI for better quality\n\n    # Extract text from each page\n    full_text = \"\"\n    for i, image in enumerate(images):\n        # Optional: Save images for debugging\n        # image.save(f'page_{i+1}.png', 'PNG')\n        \n        # Extract text with improved OCR configuration\n        page_text = pytesseract.image_to_string(\n            image, \n            lang='eng',  # English language\n            config='--psm 6'  # Assume a single uniform block of text\n        )\n        \n        full_text += f\"--- Page {i+1} ---\\n\"\n        full_text += page_text + \"\\n\\n\"\n\n    return full_text\n\n# Usage\npdf_path = 'scanned_invoice.pdf'\nextracted_text = extract_text_from_scanned_pdf(pdf_path)\nprint(extracted_text)\n\n# Optional: Save to text file\nwith open('extracted_text.txt', 'w', encoding='utf-8') as f:\n    f.write(extracted_text)\n```\n\n### Method 2: Advanced OCR with Preprocessing\n\n```python\nimport cv2\nimport numpy as np\nimport pytesseract\nfrom pdf2image import convert_from_path\n\ndef preprocess_image(image):\n    # Convert to grayscale\n    gray = cv2.cvtColor(np.array(image), cv2.COLOR_RGB2GRAY)\n    \n    # Threshold to create binary image\n    thresh = cv2.threshold(gray, 0, 255, \n        cv2.THRESH_BINARY | cv2.THRESH_OTSU)[1]\n    \n    # Denoise\n    denoised = cv2.fastNlMeansDenoising(thresh)\n    \n    return denoised\n\ndef extract_text_advanced(pdf_path):\n    # Convert PDF to images\n    images = convert_from_path(pdf_path, 500)\n    \n    full_text = \"\"\n    for i, image in enumerate(images):\n        # Preprocess image\n        preprocessed = preprocess_image(image)\n        \n        # Extract text with advanced config\n        page_text = pytesseract.image_to_string(\n            preprocessed, \n            lang='eng',\n            config='''\n            --psm 6 \n            --oem 3 \n            -c tessedit_char_whitelist=0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz$.,()-\n            '''\n        )\n        \n        full_text += f\"--- Page {i+1} ---\\n\"\n        full_text += page_text + \"\\n\\n\"\n    \n    return full_text\n\n# Usage\npdf_path = 'scanned_invoice.pdf'\nextracted_text = extract_text_advanced(pdf_path)\n```\n\n### Method 3: Combining Multiple OCR Engines\n\n```python\nimport pytesseract\nfrom pdf2image import convert_from_path\nimport cv2\nimport numpy as np\n\ndef extract_text_multi_engine(pdf_path):\n    images = convert_from_path(pdf_path, 500)\n    full_text = \"\"\n\n    for i, image in enumerate(images):\n        # Convert to numpy array\n        img_array = np.array(image)\n        \n        # Multiple preprocessing techniques\n        techniques = [\n            # Original image\n            pytesseract.image_to_string(img_array),\n            \n            # Grayscale\n            pytesseract.image_to_string(\n                cv2.cvtColor(img_array, cv2.COLOR_RGB2GRAY),\n                config='--psm 6'\n            ),\n            \n            # Thresholded\n            pytesseract.image_to_string(\n                cv2.threshold(\n                    cv2.cvtColor(img_array, cv2.COLOR_RGB2GRAY), \n                    0, 255, \n                    cv2.THRESH_BINARY | cv2.THRESH_OTSU\n                )[1],\n                config='--psm 6'\n            )\n        ]\n        \n        # Combine results, taking longest as most accurate\n        page_text = max(techniques, key=len)\n        \n        full_text += f\"--- Page {i+1} ---\\n\"\n        full_text += page_text + \"\\n\\n\"\n    \n    return full_text\n```\n\n### Prerequisites Installation\n\n#### Ubuntu/Debian\n```bash\n# Install dependencies\nsudo apt-get update\nsudo apt-get install -y \\\n    tesseract-ocr \\\n    libtesseract-dev \\\n    poppler-utils \\\n    python3-pip\n\n# Python dependencies\npip install pytesseract pdf2image opencv-python-headless numpy\n```\n\n#### macOS (with Homebrew)\n```bash\n# Install dependencies\nbrew install tesseract poppler\npip install pytesseract pdf2image opencv-python numpy\n```\n\n#### Windows\n1. Download and install:\n   - Tesseract OCR from GitHub\n   - Poppler for Windows\n   - Add to system PATH\n\n### Tips for Best Results\n1. Ensure high-quality scan\n2. Clean background\n3. High DPI (300-500)\n4. Straight, clear document\n5. Install language packs for non-English docs\n\n### Troubleshooting\n- Low accuracy? Try different preprocessing\n- Missing characters? Add to whitelist\n- Performance issues? Lower DPI or use selective processing\n\n### Error Handling\n```python\ndef safe_extract_text(pdf_path):\n    try:\n        return extract_text_from_scanned_pdf(pdf_path)\n    except Exception as e:\n        print(f\"Error extracting text: {e}\")\n        return \"\"\n```\n\n### Recommendations\n1. For invoices, try Method 2 or 3\n2. Validate extracted text\n3. Consider manual review for critical documents\n\nWould you like me to elaborate on any specific aspect of OCR text extraction from PDFs?",
  "verdict": "skill",
  "reasoning": "Response A is significantly more comprehensive and practical. It provides three complete, working code implementations with detailed explanations, installation instructions for multiple operating systems, preprocessing techniques for better OCR accuracy, error handling, and troubleshooting tips. Response B only offers a high-level overview of various tools and methods without actionable code or detailed implementation guidance. For a user who needs to actually solve the problem of extracting text from a scanned PDF, Response A delivers immediately usable solutions with proper context and technical depth, while Response B provides only superficial suggestions that would require the user to research each option further.",
  "baseline_tokens": 273,
  "skill_tokens": 3903,
  "position_a": "skill",
  "position_b": "baseline",
  "judge_model": "claude-sonnet-4-20250514",
  "judged_at": "2026-01-11T17:44:47.333030Z"
}